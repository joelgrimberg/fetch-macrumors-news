name: Go

on: [push]

jobs:

  code-check:

    name: Check formatting, linting, vetting
    runs-on: ubuntu-latest

    steps:
      - name: Checkout the code
        uses: actions/checkout@v4

      - name: Run the formatter, linter, and vetter
        uses: dell/common-github-actions/go-code-formatter-linter-vetter@main
        with:
          directories: ./...

  build:

    name: Build & Test
    runs-on: ubuntu-latest
    strategy:
      matrix:
        go-version: [1.23.2]
    steps:
      - uses: actions/checkout@v4

      - name: Set up Go ${{ matrix.go-version }}
        uses: actions/setup-go@v5
        with:
          go-version: ${{ matrix.go-version }}

      - name: Display Go version
        run: go version

      - name: Run go build
        run: go build

      # - name: Test
      #   run: go test -v ./...
